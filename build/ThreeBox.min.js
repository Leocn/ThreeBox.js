var MicroEvent=function(){};MicroEvent.prototype={bind:function(c,d){this._events=this._events||{};this._events[c]=this._events[c]||[];this._events[c].push(d)},unbind:function(c,d){this._events=this._events||{};!1!==c in this._events&&this._events[c].splice(this._events[c].indexOf(d),1)},trigger:function(c){this._events=this._events||{};if(!1!==c in this._events)for(var d=0;d<this._events[c].length;d++)this._events[c][d].apply(this,Array.prototype.slice.call(arguments,1))}};
MicroEvent.mixin=function(c){for(var d=["bind","unbind","trigger"],f=0;f<d.length;f++)c.prototype[d[f]]=MicroEvent.prototype[d[f]]};"undefined"!==typeof module&&"exports"in module&&(module.exports=MicroEvent);
function microAjax(c,d,f){this.bindFunction=function(c,d){return function(){return c.apply(d,[d])}};this.stateChange=function(){4==this.request.readyState&&this.callbackFunction(this.request.responseText)};this.getRequest=function(){return window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest?new XMLHttpRequest:!1};this.postBody=f||"";this.callbackFunction=d;this.url=c;if(this.request=this.getRequest())d=this.request,d.onreadystatechange=this.bindFunction(this.stateChange,
this),""!==this.postBody?(d.open("POST",c,!0),d.setRequestHeader("X-Requested-With","XMLHttpRequest"),d.setRequestHeader("Content-type","application/x-www-form-urlencoded"),d.setRequestHeader("Connection","close")):d.open("GET",c,!0),d.send(this.postBody)}
(function(){function c(a,e,g){if(a===e)return 0!==a||1/a==1/e;if(null==a||null==e)return a===e;a._chain&&(a=a._wrapped);e._chain&&(e=e._wrapped);if(a.isEqual&&b.isFunction(a.isEqual))return a.isEqual(e);if(e.isEqual&&b.isFunction(e.isEqual))return e.isEqual(a);var h=p.call(a);if(h!=p.call(e))return!1;switch(h){case "[object String]":return a==""+e;case "[object Number]":return a!=+a?e!=+e:0==a?1/a==1/e:a==+e;case "[object Date]":case "[object Boolean]":return+a==+e;case "[object RegExp]":return a.source==
e.source&&a.global==e.global&&a.multiline==e.multiline&&a.ignoreCase==e.ignoreCase}if("object"!=typeof a||"object"!=typeof e)return!1;for(var m=g.length;m--;)if(g[m]==a)return!0;g.push(a);var m=0,d=!0;if("[object Array]"==h){if(m=a.length,d=m==e.length)for(;m--&&(d=m in a==m in e&&c(a[m],e[m],g)););}else{if("constructor"in a!="constructor"in e||a.constructor!=e.constructor)return!1;for(var f in a)if(b.has(a,f)&&(m++,!(d=b.has(e,f)&&c(a[f],e[f],g))))break;if(d){for(f in e)if(b.has(e,f)&&!m--)break;
d=!m}}g.pop();return d}var d=this,f=d._,i={},j=Array.prototype,n=Object.prototype,k=j.slice,s=j.unshift,p=n.toString,J=n.hasOwnProperty,z=j.forEach,A=j.map,B=j.reduce,C=j.reduceRight,D=j.filter,E=j.every,F=j.some,t=j.indexOf,G=j.lastIndexOf,n=Array.isArray,K=Object.keys,u=Function.prototype.bind,b=function(a){return new q(a)};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=b),exports._=b):d._=b;b.VERSION="1.3.3";var l=b.each=b.forEach=function(a,
e,g){if(null!=a)if(z&&a.forEach===z)a.forEach(e,g);else if(a.length===+a.length)for(var h=0,c=a.length;h<c&&!(h in a&&e.call(g,a[h],h,a)===i);h++);else for(h in a)if(b.has(a,h)&&e.call(g,a[h],h,a)===i)break};b.map=b.collect=function(a,e,b){var h=[];if(null==a)return h;if(A&&a.map===A)return a.map(e,b);l(a,function(a,c,d){h[h.length]=e.call(b,a,c,d)});a.length===+a.length&&(h.length=a.length);return h};b.reduce=b.foldl=b.inject=function(a,e,g,h){var c=2<arguments.length;null==a&&(a=[]);if(B&&a.reduce===
B)return h&&(e=b.bind(e,h)),c?a.reduce(e,g):a.reduce(e);l(a,function(a,b,d){c?g=e.call(h,g,a,b,d):(g=a,c=!0)});if(!c)throw new TypeError("Reduce of empty array with no initial value");return g};b.reduceRight=b.foldr=function(a,e,g,h){var c=2<arguments.length;null==a&&(a=[]);if(C&&a.reduceRight===C)return h&&(e=b.bind(e,h)),c?a.reduceRight(e,g):a.reduceRight(e);var d=b.toArray(a).reverse();h&&!c&&(e=b.bind(e,h));return c?b.reduce(d,e,g,h):b.reduce(d,e)};b.find=b.detect=function(a,e,b){var h;H(a,function(a,
c,d){if(e.call(b,a,c,d))return h=a,!0});return h};b.filter=b.select=function(a,e,b){var h=[];if(null==a)return h;if(D&&a.filter===D)return a.filter(e,b);l(a,function(a,c,d){e.call(b,a,c,d)&&(h[h.length]=a)});return h};b.reject=function(a,e,b){var c=[];if(null==a)return c;l(a,function(a,d,f){e.call(b,a,d,f)||(c[c.length]=a)});return c};b.every=b.all=function(a,e,b){var c=!0;if(null==a)return c;if(E&&a.every===E)return a.every(e,b);l(a,function(a,d,f){if(!(c=c&&e.call(b,a,d,f)))return i});return!!c};
var H=b.some=b.any=function(a,e,g){e||(e=b.identity);var c=!1;if(null==a)return c;if(F&&a.some===F)return a.some(e,g);l(a,function(a,b,d){if(c||(c=e.call(g,a,b,d)))return i});return!!c};b.include=b.contains=function(a,e){return null==a?!1:t&&a.indexOf===t?-1!=a.indexOf(e):H(a,function(a){return a===e})};b.invoke=function(a,e){var g=k.call(arguments,2);return b.map(a,function(a){return(b.isFunction(e)?e||a:a[e]).apply(a,g)})};b.pluck=function(a,e){return b.map(a,function(a){return a[e]})};b.max=function(a,
e,g){if(!e&&b.isArray(a)&&a[0]===+a[0])return Math.max.apply(Math,a);if(!e&&b.isEmpty(a))return-Infinity;var c={computed:-Infinity};l(a,function(a,b,d){b=e?e.call(g,a,b,d):a;b>=c.computed&&(c={value:a,computed:b})});return c.value};b.min=function(a,e,g){if(!e&&b.isArray(a)&&a[0]===+a[0])return Math.min.apply(Math,a);if(!e&&b.isEmpty(a))return Infinity;var c={computed:Infinity};l(a,function(a,b,d){b=e?e.call(g,a,b,d):a;b<c.computed&&(c={value:a,computed:b})});return c.value};b.shuffle=function(a){var b=
[],g;l(a,function(a,c){g=Math.floor(Math.random()*(c+1));b[c]=b[g];b[g]=a});return b};b.sortBy=function(a,e,g){var c=b.isFunction(e)?e:function(a){return a[e]};return b.pluck(b.map(a,function(a,b,e){return{value:a,criteria:c.call(g,a,b,e)}}).sort(function(a,b){var e=a.criteria,g=b.criteria;return void 0===e?1:void 0===g?-1:e<g?-1:e>g?1:0}),"value")};b.groupBy=function(a,e){var g={},c=b.isFunction(e)?e:function(a){return a[e]};l(a,function(a,b){var e=c(a,b);(g[e]||(g[e]=[])).push(a)});return g};b.sortedIndex=
function(a,e,g){g||(g=b.identity);for(var c=0,d=a.length;c<d;){var f=c+d>>1;g(a[f])<g(e)?c=f+1:d=f}return c};b.toArray=function(a){return!a?[]:b.isArray(a)||b.isArguments(a)?k.call(a):a.toArray&&b.isFunction(a.toArray)?a.toArray():b.values(a)};b.size=function(a){return b.isArray(a)?a.length:b.keys(a).length};b.first=b.head=b.take=function(a,b,g){return null!=b&&!g?k.call(a,0,b):a[0]};b.initial=function(a,b,g){return k.call(a,0,a.length-(null==b||g?1:b))};b.last=function(a,b,g){return null!=b&&!g?
k.call(a,Math.max(a.length-b,0)):a[a.length-1]};b.rest=b.tail=function(a,b,g){return k.call(a,null==b||g?1:b)};b.compact=function(a){return b.filter(a,function(a){return!!a})};b.flatten=function(a,e){return b.reduce(a,function(a,c){if(b.isArray(c))return a.concat(e?c:b.flatten(c));a[a.length]=c;return a},[])};b.without=function(a){return b.difference(a,k.call(arguments,1))};b.uniq=b.unique=function(a,e,c){var c=c?b.map(a,c):a,d=[];3>a.length&&(e=!0);b.reduce(c,function(c,g,f){if(e?b.last(c)!==g||
!c.length:!b.include(c,g))c.push(g),d.push(a[f]);return c},[]);return d};b.union=function(){return b.uniq(b.flatten(arguments,!0))};b.intersection=b.intersect=function(a){var e=k.call(arguments,1);return b.filter(b.uniq(a),function(a){return b.every(e,function(e){return 0<=b.indexOf(e,a)})})};b.difference=function(a){var e=b.flatten(k.call(arguments,1),!0);return b.filter(a,function(a){return!b.include(e,a)})};b.zip=function(){for(var a=k.call(arguments),e=b.max(b.pluck(a,"length")),c=Array(e),d=
0;d<e;d++)c[d]=b.pluck(a,""+d);return c};b.indexOf=function(a,e,c){if(null==a)return-1;var d;if(c)return c=b.sortedIndex(a,e),a[c]===e?c:-1;if(t&&a.indexOf===t)return a.indexOf(e);c=0;for(d=a.length;c<d;c++)if(c in a&&a[c]===e)return c;return-1};b.lastIndexOf=function(a,b){if(null==a)return-1;if(G&&a.lastIndexOf===G)return a.lastIndexOf(b);for(var c=a.length;c--;)if(c in a&&a[c]===b)return c;return-1};b.range=function(a,b,c){1>=arguments.length&&(b=a||0,a=0);for(var c=arguments[2]||1,d=Math.max(Math.ceil((b-
a)/c),0),f=0,j=Array(d);f<d;)j[f++]=a,a+=c;return j};var I=function(){};b.bind=function(a,e){var c,d;if(a.bind===u&&u)return u.apply(a,k.call(arguments,1));if(!b.isFunction(a))throw new TypeError;d=k.call(arguments,2);return c=function(){if(!(this instanceof c))return a.apply(e,d.concat(k.call(arguments)));I.prototype=a.prototype;var b=new I,f=a.apply(b,d.concat(k.call(arguments)));return Object(f)===f?f:b}};b.bindAll=function(a){var c=k.call(arguments,1);0==c.length&&(c=b.functions(a));l(c,function(c){a[c]=
b.bind(a[c],a)});return a};b.memoize=function(a,c){var d={};c||(c=b.identity);return function(){var f=c.apply(this,arguments);return b.has(d,f)?d[f]:d[f]=a.apply(this,arguments)}};b.delay=function(a,b){var c=k.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)};b.defer=function(a){return b.delay.apply(b,[a,1].concat(k.call(arguments,1)))};b.throttle=function(a,c){var d,f,j,k,i,n,l=b.debounce(function(){i=k=!1},c);return function(){d=this;f=arguments;j||(j=setTimeout(function(){j=
null;i&&a.apply(d,f);l()},c));k?i=!0:n=a.apply(d,f);l();k=!0;return n}};b.debounce=function(a,b,c){var d;return function(){var f=this,j=arguments;c&&!d&&a.apply(f,j);clearTimeout(d);d=setTimeout(function(){d=null;c||a.apply(f,j)},b)}};b.once=function(a){var b=!1,c;return function(){if(b)return c;b=!0;return c=a.apply(this,arguments)}};b.wrap=function(a,b){return function(){var c=[a].concat(k.call(arguments,0));return b.apply(this,c)}};b.compose=function(){var a=arguments;return function(){for(var b=
arguments,c=a.length-1;0<=c;c--)b=[a[c].apply(this,b)];return b[0]}};b.after=function(a,b){return 0>=a?b():function(){if(1>--a)return b.apply(this,arguments)}};b.keys=K||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var c=[],d;for(d in a)b.has(a,d)&&(c[c.length]=d);return c};b.values=function(a){return b.map(a,b.identity)};b.functions=b.methods=function(a){var c=[],d;for(d in a)b.isFunction(a[d])&&c.push(d);return c.sort()};b.extend=function(a){l(k.call(arguments,1),function(b){for(var c in b)a[c]=
b[c]});return a};b.pick=function(a){var c={};l(b.flatten(k.call(arguments,1)),function(b){b in a&&(c[b]=a[b])});return c};b.defaults=function(a){l(k.call(arguments,1),function(b){for(var c in b)null==a[c]&&(a[c]=b[c])});return a};b.clone=function(a){return!b.isObject(a)?a:b.isArray(a)?a.slice():b.extend({},a)};b.tap=function(a,b){b(a);return a};b.isEqual=function(a,b){return c(a,b,[])};b.isEmpty=function(a){if(null==a)return!0;if(b.isArray(a)||b.isString(a))return 0===a.length;for(var c in a)if(b.has(a,
c))return!1;return!0};b.isElement=function(a){return!!(a&&1==a.nodeType)};b.isArray=n||function(a){return"[object Array]"==p.call(a)};b.isObject=function(a){return a===Object(a)};b.isArguments=function(a){return"[object Arguments]"==p.call(a)};b.isArguments(arguments)||(b.isArguments=function(a){return!(!a||!b.has(a,"callee"))});b.isFunction=function(a){return"[object Function]"==p.call(a)};b.isString=function(a){return"[object String]"==p.call(a)};b.isNumber=function(a){return"[object Number]"==
p.call(a)};b.isFinite=function(a){return b.isNumber(a)&&isFinite(a)};b.isNaN=function(a){return a!==a};b.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"==p.call(a)};b.isDate=function(a){return"[object Date]"==p.call(a)};b.isRegExp=function(a){return"[object RegExp]"==p.call(a)};b.isNull=function(a){return null===a};b.isUndefined=function(a){return void 0===a};b.has=function(a,b){return J.call(a,b)};b.noConflict=function(){d._=f;return this};b.identity=function(a){return a};b.times=
function(a,b,c){for(var d=0;d<a;d++)b.call(c,d)};b.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};b.result=function(a,c){if(null==a)return null;var d=a[c];return b.isFunction(d)?d.call(a):d};b.mixin=function(a){l(b.functions(a),function(c){var d=b[c]=a[c];q.prototype[c]=function(){var a=k.call(arguments);s.call(a,this._wrapped);return v(d.apply(b,a),this._chain)}})};var L=0;b.uniqueId=
function(a){var b=L++;return a?a+b:b};b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var w=/.^/,r={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"},x;for(x in r)r[r[x]]=x;var M=/\\|'|\r|\n|\t|\u2028|\u2029/g,N=/\\(\\|'|r|n|t|u2028|u2029)/g,y=function(a){return a.replace(N,function(a,b){return r[b]})};b.template=function(a,c,d){d=b.defaults(d||{},b.templateSettings);a="__p+='"+a.replace(M,function(a){return"\\"+r[a]}).replace(d.escape||
w,function(a,b){return"'+\n_.escape("+y(b)+")+\n'"}).replace(d.interpolate||w,function(a,b){return"'+\n("+y(b)+")+\n'"}).replace(d.evaluate||w,function(a,b){return"';\n"+y(b)+"\n;__p+='"})+"';\n";d.variable||(a="with(obj||{}){\n"+a+"}\n");var a="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+a+"return __p;\n",f=new Function(d.variable||"obj","_",a);if(c)return f(c,b);c=function(a){return f.call(this,a,b)};c.source="function("+(d.variable||"obj")+"){\n"+a+"}";return c};
b.chain=function(a){return b(a).chain()};var q=function(a){this._wrapped=a};b.prototype=q.prototype;var v=function(a,c){return c?b(a).chain():a};b.mixin(b);l("pop push reverse shift sort splice unshift".split(" "),function(a){var b=j[a];q.prototype[a]=function(){var c=this._wrapped;b.apply(c,arguments);var d=c.length;("shift"==a||"splice"==a)&&0===d&&delete c[0];return v(c,this._chain)}});l(["concat","join","slice"],function(a){var b=j[a];q.prototype[a]=function(){return v(b.apply(this._wrapped,arguments),
this._chain)}});q.prototype.chain=function(){this._chain=!0;return this};q.prototype.value=function(){return this._wrapped}}).call(this);var \u03c0=Math.PI,\u03c4=2*\u03c0;(function(c){for(var d in c)if(!window[d])throw"Error: ThreeBox requires "+c[d];})({THREE:"Three.js",tQuery:"tQuery.js (bundle)"});window.ThreeBox={};window.threeBox=function(c,d){c&&!(c instanceof Node)&&(d=c,c=null);return tQuery.createWorld(d).threeBox(c,d)};
MicroEvent.prototype.on=function(){MicroEvent.prototype.bind.apply(this,arguments);return this};MicroEvent.prototype.emit=function(){MicroEvent.prototype.trigger.apply(this,arguments);return this};MicroEvent.mixin=function(c){for(var d=["bind","unbind","trigger","on","emit"],f=0;f<d.length;f++)c.prototype[d[f]]=MicroEvent.prototype[d[f]]};tQuery.World.prototype.on=tQuery.World.prototype.addEventListener;tQuery.World.prototype.emit=tQuery.World.prototype.dispatchEvent;
tQuery.World.register("threeBox",function(c,d){c&&!(c instanceof Node)&&(d=c,c=null);var f=c=c||document.body;c==document.body?(f.style.margin=0,f.style.padding=0,f.style.overflow="hidden"):(getComputedStyle(c),"static"==c.position&&(c.position="relative"));this.appendTo(f);this.addThreeBox(c,d||{});return this});
tQuery.World.register("addThreeBox",function(c,d){console.assert(!0!==this.hasThreeBox());d=tQuery.extend(d,{cameraControls:!1,cursor:!0,controlClass:ThreeBox.OrbitControls,elementResize:!0,fullscreen:!0,screenshot:!0,stats:!0,scale:1});this.tRenderer().domElement.style.display="block";var f={};tQuery.data(this,"_threeBoxContext",f);var i=this.tCamera(),j=this.tRenderer();d.stats&&(f.stats=new Stats,f.stats.domElement.style.position="absolute",f.stats.domElement.style.left="10px",f.stats.domElement.style.top=
"10px",c&&c.appendChild(f.stats.domElement),f.loopStats=function(){f.stats.update()},this.loop().hook(f.loopStats));if(d.cameraControls){var n=this.loop(),k=this.render.bind(this);f.cameraControls=ThreeBox.OrbitControls.bind(i,c,d).on("change",function(){n._timerId||k()});this.setCameraControls(f.cameraControls)}d.elementResize&&(f.elementResize=ThreeBox.ElementResize.bind(j,i,c,d).on("resize",function(c,d){this._opts.renderW=c;this._opts.renderH=d;this.emit("resize",c,d)}.bind(this)));null!==d.cursor&&
(f.cursor=ThreeBox.Cursor.bind(c,d));d.screenshot&&(f.screenshot=THREEx.Screenshot.bindKey(j));d.fullscreen&&THREEx.FullScreen.available()&&(f.fullscreen=THREEx.FullScreen.bindKey());f._$onDestroy=this.bind("destroy",function(){!1!==this.hasThreeBox()&&this.removeThreeBox()});return this});tQuery.World.register("hasThreeBox",function(){return void 0===tQuery.data(this,"_threeBoxContext")?!1:!0});
tQuery.World.register("removeThreeBox",function(){var c=tQuery.data(this,"_threeBoxContext");if(void 0===c)return this;tQuery.removeData(this,"_threeBoxContext");this.unbind("destroy",this._$onDestroy);c.stats&&(document.body.removeChild(c.stats.domElement),this.loop().unhook(c.loopStats));c.cameraControls&&this.removeCameraControls()&&c.cameraControls.stop();c.elementResize&&c.elementResize.unbind();c.cursor&&c.cursor.unbind();c.screenshot&&c.screenshot.unbind();c.fullscreen&&c.fullscreen.unbind()});
ThreeBox.ElementResize=function(c,d,f,i){this.scale=i.scale||1;this.orbit=i.orbit;i=this.callback=function(){var j=Math.floor(f.offsetWidth),i=Math.floor(f.offsetHeight);c.domElement.style.position="absolute";c.domElement.style.width=j+"px";c.domElement.style.height=i+"px";var k=Math.floor(j/this.scale),s=Math.floor(i/this.scale);c.setSize(k,s);d.aspect=j/i;d instanceof THREE.OrthographicCamera&&(d.top=this.orbit/2,d.bottom=-d.top,d.left=-d.top*d.aspect,d.right=-d.bottom*d.aspect);d.updateProjectionMatrix();
this.emit("resize",k,s)}.bind(this);window.addEventListener("resize",i,!1);f.addEventListener("resize",i,!1);setTimeout(i,0)};ThreeBox.ElementResize.bind=function(c,d,f,i){return new ThreeBox.ElementResize(c,d,f,i)};ThreeBox.ElementResize.prototype.scale=function(c){this.scale=c};ThreeBox.ElementResize.prototype.unbind=function(){window.removeEventListener("resize",callback);domElement.removeEventListener("resize",callback)};MicroEvent.mixin(ThreeBox.ElementResize);
ThreeBox.OrbitControls=function(c,d,f){this.element=d;this.camera=c;this.options=tQuery.extend(f,{phi:\u03c4/4,theta:0.3,orbit:2,lookAt:[0,0,0],speed:2});this.init();this.start();this.update()};
ThreeBox.OrbitControls.prototype={init:function(){this.width=this.element&&this.element.offsetWidth;this.height=this.element&&this.element.offsetHeight;this.phi=this.options.phi;this.theta=this.options.theta;this.orbit=this.options.orbit;this.speed=this.options.speed;this.lookAt=new THREE.Vector3;this.lookAt.set.apply(this.lookAt,this.options.lookAt||[])},start:function(){var c=this;this._mouseDown=function(c){this.drag=!0;this.lastHover=this.origin={x:c.pageX,y:c.pageY};c.preventDefault()}.bind(this);
this._mouseUp=function(){this.drag=!1}.bind(this);this._mouseMove=function(){if(c.drag){var d={x:event.pageX-c.origin.x,y:event.pageY-c.origin.y},f={x:event.pageX-c.lastHover.x,y:event.pageY-c.lastHover.y};c.lastHover={x:event.pageX,y:event.pageY};c.moved(c.origin,d,f)}}.bind(this);this.element&&(this.element.addEventListener("mousedown",this._mouseDown,!1),document.addEventListener("mouseup",this._mouseUp,!1),document.addEventListener("mousemove",this._mouseMove,!1))},stop:function(){this.element&&
(this.element.removeEventListener("mousedown",this._mouseDown),document.removeEventListener("mouseup",this._mouseUp),document.removeEventListener("mousemove",this._mouseMove))},moved:function(c,d,f){this.phi+=f.x*this.speed/this.width;this.theta=Math.min(\u03c0/2,Math.max(-\u03c0/2,this.theta+f.y*this.speed/this.height));this.emit("change")},update:function(){this.camera.position.x=Math.cos(this.phi)*Math.cos(this.theta)*this.orbit;this.camera.position.y=Math.sin(this.theta)*this.orbit;this.camera.position.z=
Math.sin(this.phi)*Math.cos(this.theta)*this.orbit;this.camera.position.addSelf(this.lookAt);this.camera.lookAt(this.lookAt)}};ThreeBox.OrbitControls.bind=function(c,d,f){return new ThreeBox.OrbitControls(c,d,f)};MicroEvent.mixin(ThreeBox.OrbitControls);
ThreeBox.Cursor=function(c,d){function f(){n||(c.style.cursor=i);clearTimeout(j);n=!1;j=setTimeout(function(){n=!0;c.style.cursor="none"},k)}var i=d.cameraControls?"move":"default",j=null,n=!1,k=2E3;d.cursor?c.style.cursor=i:(c.addEventListener("mousemove",f),c.style.cursor="none");return{unbind:function(){c.removeEventListener("mousemove",f)}}};ThreeBox.Cursor.bind=function(c,d){return ThreeBox.Cursor(c,d)};
ThreeBox.preload=function(c,d){c instanceof Function&&(d=c,c=[]);var c="string"==typeof c?[c]:c,f=c.length;_.each(c,function(c){new microAjax(c,function(c){var i;(i=c.match(/^<script[^>]*type=['"]text\/javascript['"][^>]*>([\s\S]+?)<\/script>$/m))?(c=document.createElement("script"),c.type="text/javascript",c.innerHTML=i[1],document.body.appendChild(c)):(i=document.createElement("div"),i.innerHTML=c,document.body.appendChild(i));0==--f&&d()})})};
